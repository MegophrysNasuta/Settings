{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "alias",
    "name": "Add Room Mark",
    "script": "local tmp = getRoomUserData(1, \"gotoMapping\")\nlocal maptable = {}\n\nif tmp ~= \"\" then\n  maptable = yajl.to_value(tmp)\nend\n\nlocal location, markname\nif not matches[3] then\n  markname = matches[2]\n  location = mmp.currentroom\nelseif tonumber(matches[2]) then\n  location = matches[2]; markname = matches[3]\nelse\n  location = matches[3]; markname = matches[2]\nend\n\n-- can't allow mark name to ne a number - yajl then generates a giant table of null's\nif tonumber(markname) then\n  mmp.echo(\"The mark name can't be a number.\") return\nend\n\nmaptable[markname] = location\nlocal tmp2 = yajl.to_string(maptable)\n\nif not mmp.roomexists(1) then\n  addRoom(1)\nend\n\nsetRoomUserData(1, \"gotoMapping\", tmp2)\nmmp.echo(string.format(\"Room mark for '%s' set to room %s.\", markname, location))",
    "command": null,
    "packageName": null,
    "regex": "^room mark (\\w+)(?: (\\w+))?$"
}
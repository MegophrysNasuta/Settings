{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "alias",
    "name": "Manually set the room coordinates",
    "script": "-- want the current room, but we're lost\nif matches[2] == '' and (not mmp.currentroom or not mmp.roomexists(mmp.currentroom)) then mmp.echo(\"Don't know where we are at the moment.\") return end\n\n-- want another room, but it doesn't actually exist\nif matches[2] ~= '' and not mmp.roomexists(matches[2]) then mmp.echo(\"v\"..matches[2]..\" doesn't exist.\") return end\n\nlocal m = matches[3]\nlocal rid, rname = (matches[2] ~= \"\" and matches[2] or mmp.currentroom),\n  (matches[2] ~= \"\" and getRoomName(matches[2]) or mmp.currentroomname)\nlocal x,y,z\n\nlocal function set() -- small func to set things\n  setRoomCoordinates(rid, x, y, z)\n  mmp.echo(string.format(\"%s (%d) is now at %dx, %dy, %dz.\\n\", rname, rid, x,y,z))\n  centerview(rid)\nend\n\n-- let's be flexible and allow several ways if giving an arg\n-- rc x y z\nx,y,z = string.match(m, \"(%-?%d+) (%-?%d+) (%-?%d+)\")\nif x then\n  set(); return\nend\n\n-- rc xx? yy? zz?\nx,y,z = string.match(m, \"(%-?%d+)x\"), string.match(m, \"(%-?%d+)y\"), string.match(m, \"(%-?%d+)z\")\nif x or y or z then\n  -- merge w/ old coords if any are missing\n  local ox, oy, oz = getRoomCoordinates(rid)\n  x = x or ox; y = y or oy; z = z or oz\n  set(); return\nend\n\n-- rc left/west, right/east, ...\nlocal ox, oy, oz = getRoomCoordinates(rid)\nlocal has = table.contains\nfor w in string.gmatch(m, \"%a+\") do\n  if has({\"west\", \"left\", \"w\", \"l\"}, w) then\n    x = (x or ox) - 1; y = (y or oy); z = (z or oz)\n  elseif has({\"east\", \"right\", \"e\", \"r\"}, w) then\n    x = (x or ox) + 1; y = (y or oy); z = (z or oz)\n  elseif has({\"north\", \"top\", \"n\", \"t\"}, w) then\n    x = (x or ox); y = (y or oy) + 1; z = (z or oz)\n  elseif has({\"south\", \"bottom\", \"s\", \"b\"}, w) then\n    x = (x or ox); y = (y or oy) - 1; z = (z or oz)\n  elseif has({\"northwest\", \"topleft\", \"nw\", \"tl\"}, w) then\n    x = (x or ox) - 1; y = (y or oy) + 1; z = (z or oz)\n  elseif has({\"northeast\", \"topright\", \"ne\", \"tr\"}, w) then\n    x = (x or ox) + 1; y = (y or oy) + 1; z = (z or oz)\n  elseif has({\"southeast\", \"bottomright\", \"se\", \"br\"}, w) then\n    x = (x or ox) + 1; y = (y or oy) - 1; z = (z or oz)\n  elseif has({\"southwest\", \"bottomleft\", \"sw\", \"bl\"}, w) then\n    x = (x or ox) - 1; y = (y or oy) - 1; z = (z or oz)\n  elseif has({\"up\", \"u\"}, w) then\n    x = (x or ox); y = (y or oy); z = (z or oz) + 1\n  elseif has({\"down\", \"d\"}, w) then\n    x = (x or ox); y = (y or oy); z = (z or oz) - 1\n  end\n\nend\nif x then set(); return end\n\nmmp.echo([[Where do you want to move the room to?\n  You can use direct coordinates or relative directions.]])",
    "command": null,
    "packageName": null,
    "regex": "^(?:rc|room coords) (?:v(\\d+) )?(.+)$"
}
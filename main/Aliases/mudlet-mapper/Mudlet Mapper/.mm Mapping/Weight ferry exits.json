{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "alias",
    "name": "Weight ferry exits",
    "script": "local ferryCommands = {\n  [\"buy passage to\"] = {\"achaea\"},\n  [\"takeoff to\"] = {\"starmourn\"},\n  [\"station transfer to\"] = {\"starmourn\"}\n}\nlocal c = 0\nlocal weight = 200\nfor area in pairs(mmp.areatabler) do\n  local rooms = getAreaRooms(area) or {}\n  for i = 0, #rooms do\n    local exits = getSpecialExits(rooms[i] or 0)\n    if exits and next(exits) then\n      for exit, cmd in pairs(exits) do\n        if type(cmd) == \"table\" then\n          cmd = next(cmd)\n        end\n        local lowerCommand = cmd:lower()\n        local found = false\n        for ferryCommand, games in pairs(ferryCommands) do\n          if table.contains(games, mmp.game) and lowerCommand:find(ferryCommand, 1, true) then\n            found = true\n            break\n          end\n        end\n        if found then\n          setExitWeight(rooms[i], cmd, weight)\n          mmp.echo(\n            \"Weighted \" .. cmd .. \" going to \" .. rooms[i] .. \" (\" .. getRoomName(rooms[i]) .. \").\"\n          )\n          c = c + 1\n        end\n      end\n    end\n  end\nend\nmmp.echo(\n  string.format(\n    \"%s ferry exits weighted to %s (so we don't take them over too short distances).\", c, weight\n  )\n)",
    "command": null,
    "packageName": null,
    "regex": "^weight ferry exits$"
}
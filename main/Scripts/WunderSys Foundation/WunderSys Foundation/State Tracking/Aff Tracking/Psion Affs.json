{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Psion Affs",
    "packageName": null,
    "script": "wsysf.aff_tracking.psion = {}\nlocal psion = {}\n\nwsysf.aff_tracking.psion.invert = function()\n\tlocal unweaves = { \"unweavingspirit\", \"unweavingbody\", \"unweavingmind\" }\n\tlocal from_weave = false\n\tlocal to_weave = false\n\t\n\t-- TODO: Really, this swaps the values. Does this work if you have some of both already?\n\t-- How do we know which are swapped?\t\n\tfor _,unw in ipairs( unweaves ) do\n\t\tif wsysf.aff_tracking.lost[unw] then\n\t\t\tfrom_weave = unw\n\t\telseif wsysf.aff_tracking.new[unw] then\n\t\t\tto_weave = unw\n\t\tend\n\tend\n\tif from_weave and to_weave then\n\t\twsysf.aff_tracking.set_aff_value( to_weave, wsysf.aff_tracking.lost[from_weave] )\n\n\t\twsysf.core.debug.print( 5, \"Unweave converted \".. from_weave ..\" to \"..to_weave .. \" value=\".. wsysf.affs[to_weave] )\n\tend\nend\n",
    "eventHandlerList": null
}
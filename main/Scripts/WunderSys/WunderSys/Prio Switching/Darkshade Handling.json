{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Darkshade Handling",
    "packageName": null,
    "script": "function wsys.darkshadeGained(event, affliction, class)\n  if event == \"got aff\" then\n    if affliction == \"darkshade\" then\n      if wsys.lightwall then\n        --wsys.switchPrios( \"darkshade\", 5, true )\n        wsys.darkshadeTimer(true)\n      else\n        wsys.darkshadeTimer(false)\n      end\n    end\n  end\nend --func\n\nif wsys.events.got_darskade then killAnonymousEventHandler( wsys.events.got_darskade ) end\n\nwsys.events.got_darskade = registerAnonymousEventHandler(\"got aff\", \"wsys.darkshadeGained\")\n\nfunction wsys.darkshadeLost(event, affliction)\n  if event == \"lost aff\" then\n    if affliction == \"darkshade\" then\n      wsys.affPrioRestore( \"darkshade\" )\n      if wsys.timer.darkshade then killTimer(tostring(wsys.timer.darkshade)) end\n      wsys.timer.darkshade = nil\n    end\n  end\nend --func\n\nif wsys.events.lost_darskade then killAnonymousEventHandler( wsys.events.lost_darskade ) end\nwsys.events.lost_darskade = registerAnonymousEventHandler(\"lost aff\", \"wsys.darkshadeLost\")\n\n\nfunction wsys.darkshadeTimer(lightwall)\n  if wsys.lightwall then\n    if not wsys.timer.darkshade then\n      wsys.timer.darkshade = tempTimer(8, [[wsys.timer.darkshade = nil;wsys.switchPrios( \"darkshade\", 2 )]])\n    end\n  else\n    if not wsys.timer.darkshade then\n      wsys.timer.darkshade = tempTimer(15, [[wsys.timer.darkshade = nil;wsys.switchPrios( \"darkshade\", 2 )]])\n    end\n  end\nend\n\n\n",
    "eventHandlerList": null
}
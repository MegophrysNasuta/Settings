{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Focus Shifts",
    "packageName": null,
    "script": "function wsys.focusshifthandler(event, bal)\n\t-- Shift when off both focus and herb balance. Only restore when both are back\n  if event == \"got bal\" and not wsys.settings.stopfocus and ( ( bal == \"focus\" and wsys.bals.herb ) or ( bal == \"herb\" and wsys.bals.focus ) ) then\n    wsys.onfocusbalprios()\n  elseif event == \"lost bal\" and ( ( bal == \"focus\" and not wsys.bals.herb ) or ( bal == \"herb\" and not wsys.bals.focus ) ) then\n    wsys.offfocusbalprios()\n  end\nend\n\nregisterAnonymousEventHandler(\"got bal\", \"wsys.focusshifthandler\")\nregisterAnonymousEventHandler(\"lost bal\", \"wsys.focusshifthandler\")\n\nfunction wsys.offfocusbalprios()\n  for k,v in pairs(wsys.settings.focusshifts[wsys.profile][wsys.myClass()]) do\n    wsys.switchPrios(k, v)\n  end\nend\n\nfunction wsys.onfocusbalprios()\n  for k,v in pairs(wsys.settings.focusshifts[wsys.profile][wsys.myClass()]) do\n    wsys.affPrioRestore(k)\n  end\nend\n\nfunction wsys.focusshiftsdisplay()\n  wsys.report(\"Focus shifts (\" .. wsys.profile .. \"):\")\n  for k,v in wsys.spairs(wsys.settings.focusshifts[wsys.profile][wsys.myClass()], function(t,a,b) return t[b] > t[a] end) do\n    cecho(\"<white>\\n\"..k .. \": \" .. v)\n    local aliasone = \"wconfig focusshift \" .. k .. \" \" .. tonumber(v) + 1\n    local commandone = [[expandAlias(\"]]..aliasone..[[\")]]\n    echo(\" \")\n    echoLink(\"(+)\", commandone, \"Move 'down' \" .. k, true)\n    echo(\" \")\n    local aliastwo = \"wconfig focusshift \" .. k .. \" \" .. tonumber(v) - 1\n    local commandtwo = [[expandAlias(\"]]..aliastwo..[[\")]]\n    echoLink(\"(-)\", commandtwo, \"Move 'up' \" .. k, true)\n  end\nend\n\nfunction wsys.setfocusshift(affliction, prio)\n  if (tonumber(prio) > 0) and (tonumber(prio) <= 26) then\n    wsys.settings.focusshifts[wsys.profile][wsys.myClass()][affliction] = tonumber(prio)\n    wsys.report(\"Set \" .. aff .. \" to \" .. prio .. \" on focus shift (if off focus balance).\")\n  else\n    wsys.report(\"Cannot set a prio lower than 1 or higher than 26.\")\n  end\n  wsys.focusshiftsdisplay()\nend\n\nfunction wsys.return_defaultfocusshifts()\n  return {\n    recklessness = 12,\n    confusion = 8,\n    stupidity = 9,\n    dizziness = 14,\n    shyness = 14,\n    paranoia = 14,\n    dementia = 14,\n    hallucinations = 14\n  }\nend",
    "eventHandlerList": null
}
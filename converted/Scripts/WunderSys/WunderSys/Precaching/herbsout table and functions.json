{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "herbsout table and functions",
    "packageName": null,
    "script": "-- herbsout table\nwsys.herbsout = {\n\n [\"antimony\"] = 0,\n [\"argentum\"] = 0,\n [\"arsenic\"] = 0,\n [\"aurum\"] = 0,\n [\"azurite\"] = 0,\n [\"ash\"] = 0,\n [\"bayberry\"] = 0,\n [\"bellwort\"] = 0,\n [\"bisemutum\"] = 0,\n [\"bloodroot\"] = 0,\n [\"calamine\"] = 0,\n [\"calcite\"] = 0,\n [\"cinnabar\"] = 0,\n [\"cohosh\"] = 0,\n [\"cuprum\"] = 0,\n [\"dolomite\"] = 0,\n [\"elm\"] = 0,\n [\"ferrum\"] = 0,\n [\"ginger\"] = 0,\n [\"ginseng\"] = 0,\n [\"goldenseal\"] = 0,\n [\"gypsum\"] = 0,\n [\"hawthorn\"] = 0,\n [\"kelp\"] = 0,\n [\"kola\"] = 0,\n [\"lobelia\"] = 0,\n [\"magnesium\"] = 0,\n [\"malachite\"] = 0,\n [\"skullcap\"] = 0,\n [\"valerian\"] = 0,\n [\"sileris\"] = 0,\n [\"moss\"] = 0,\n [\"pear\"] = 0,\n [\"plumbum\"] = 0,\n [\"potash\"] = 0,\n [\"quartz\"] = 0,\n [\"quicksilver\"] = 0,\n [\"realgar\"] = 0,\n [\"stannum\"] = 0,\n [\"ginger\"] = 0,\n [\"antimony\"] = 0,\n\n}\n\n--parsing function for extracting herb names\nfunction wsys.returnHerbName(s)\n  for k,v in pairs(wsys.herbsout) do\n    local pattern = \"%W(\"..k..\")\"\n    local theMatch = string.match(s, pattern)\n\n  --check if pattern matched something (result is not nil)\n    if theMatch then return theMatch end\n  end\n  return false\nend\n\n--get a number from a string\nfunction wsys.extractNumberFromString(s)\n  return tonumber(string.match(s, \"(%d+)\"))\nend\n\n--never change these variables\nwsys.addedHerbID = 1\nwsys.removedHerbID = 2\n\n\n--outrift herbs missing\nfunction wsys.outrqueue()\n if wsys.cancure() and wsys.outriftcheck() and not wsys.timer.outrqueuewait then\n  if wsys.timer.outrqueuewait then killTimer(wsys.timer.outrqueuewait) end\n  wsys.timer.outrqueuewait = tempTimer(wsys.myPing() * 1.5, [[wsys.timer.outrqueuewait = nil]])\n\n  for k,v in pairs(wsys.herbsout) do\n   if wsys.keepout[k] and v < wsys.keepout[k] then\n    wsys.outr(k, wsys.keepout[k] - v)    \n   end -- if\n  end -- for\n end -- if\nend -- func\n\nfunction wsys.outr(herb, num)\n  wsys.salviaSend(\"outr \" .. num .. \" \" .. herb)\nend -- func\n\n--outrifted function as blind and no mindseye failsafe\nfunction wsys.outrifted(herb, num)\n  local herbName = wsys.returnHerbName(herb)\n  local amount = tonumber(num)\n\n  if herbName then\n    wsys.herbsout[herbName] = wsys.herbsout[herbName] + amount\n  end\nend\n\n--serverside trigger outrift function\nfunction wsys.serversideOutrift(herb)\n  local herbName = herb\n  if herbName == \"irid\" then herbName = \"moss\" end\n  wsys.herbsout[herbName] = 0\n  wsys.outrqueue()\nend\n\nfunction wsys.inralld()\n  wsys.resetherbsoutTable()\n  if wsys.timer.inrafailsafe then killTimer(wsys.timer.inrafailsafe) end\n  wsys.timer.inrafailsafe = tempTimer(1+wsys.myPing(), [[wsys.timer.inrafailsafe = nil;wsys.outrqueue()]])\nend\n\nfunction wsys.resetherbsoutTable()\n  wsys.herbsout = {\n\n [\"antimony\"] = 0,\n [\"argentum\"] = 0,\n [\"arsenic\"] = 0,\n [\"aurum\"] = 0,\n [\"azurite\"] = 0,\n [\"ash\"] = 0,\n [\"bayberry\"] = 0,\n [\"bellwort\"] = 0,\n [\"bisemutum\"] = 0,\n [\"bloodroot\"] = 0,\n [\"calamine\"] = 0,\n [\"calcite\"] = 0,\n [\"cinnabar\"] = 0,\n [\"cohosh\"] = 0,\n [\"cuprum\"] = 0,\n [\"dolomite\"] = 0,\n [\"elm\"] = 0,\n [\"ferrum\"] = 0,\n [\"ginger\"] = 0,\n [\"ginseng\"] = 0,\n [\"goldenseal\"] = 0,\n [\"gypsum\"] = 0,\n [\"hawthorn\"] = 0,\n [\"kelp\"] = 0,\n [\"kola\"] = 0,\n [\"lobelia\"] = 0,\n [\"magnesium\"] = 0,\n [\"malachite\"] = 0,\n [\"skullcap\"] = 0,\n [\"valerian\"] = 0,\n [\"sileris\"] = 0,\n [\"moss\"] = 0,\n [\"pear\"] = 0,\n [\"plumbum\"] = 0,\n [\"potash\"] = 0,\n [\"quartz\"] = 0,\n [\"quicksilver\"] = 0,\n [\"realgar\"] = 0,\n [\"stannum\"] = 0,\n [\"ginger\"] = 0,\n [\"antimony\"] = 0,\n\n}\nend\n",
    "eventHandlerList": null
}
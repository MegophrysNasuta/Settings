{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Load Settings",
    "packageName": null,
    "script": "local settings_allow_false = {\n elmtwopipe = true,\n valeriantwopipe = true,\n skullcaptwopipe = true,\n promptline2 = true,\n}\n\n--change setting\nfunction wsys.setSettings(setting, value)\n  if settings_allow_false[setting] then\n    if value == \"false\" then\n      wsys.settings[setting] = wsys.stringToBoolean(value)\n      wsys.report(setting .. \" set to \" .. tostring(wsys.stringToBoolean(value)))\n    else\n      wsys.settings[setting] = value\n      wsys.report(setting .. \" set to \" .. value)\n    end\n  elseif type(wsys.settings[setting]) == \"boolean\" then\n    wsys.settings[setting] = wsys.stringToBoolean(value)\n    wsys.report(setting .. \" set to \" .. tostring(wsys.stringToBoolean(value)))\n  elseif type(wsys.settings[setting]) == \"number\" then\n    wsys.settings[setting] = tonumber(value)\n    wsys.report(setting .. \" set to \" .. tostring(value))\n  elseif type(wsys.settings[setting]) == \"string\" then\n    wsys.settings[setting] = value\n    wsys.report(setting .. \" set to \" .. tostring(value))\n  elseif setting == \"precache\" or setting == \"focusshift\" or setting == \"profile\" then\n  elseif type(wsys.settings[setting]) == \"nil\" then\n    wsys.report(setting .. \" is <red>not <white>a valid setting.\")\n  end\n  \n  wsys.saveSettings()\nend\n\nfunction wsys.stringToBoolean(s)\n  local st = string.lower(s)\n  if st == \"true\" or st == \"on\" or st == \"1\" or st == \"yes\" or st == \"yep\" or st == \"y\" then\n    return true\n  else\n    return false\n  end\nend\n\nfunction wsys.return_defaultsettings( no_save )\n  wsys.settings = \n    {\n  elmpipe = \"123456\",\n  skullcappipe = \"123456\",\n  valerianpipe = \"123456\",\n  elmtwopipe = false,\n  skullcaptwopipe = false,\n  valeriantwopipe = false,\n  haverage = false,\n  gagclot = true,\n  gagcuring = false,\n  class = \"jobless\",\n  gagaffshift = true,\n  useinsomnia = false,\n  affprio = {\n    basic = {\n    },\n  },\n  container = \"pack\",\n  affcuredechos = false,\n  autoshrugging = false,\n  affgainedechos = false,\n  manapercent = 10,\n  usemoss = false,\n  prompt = \"@warning#red@paused@softpaused#DodgerBlue@retardation#yellow@phase#hcolour@healthh #mcolour@manam #ecolour@percentendurance%e #wcolour@percentwillpower%w @kai@shin#white@bal@bal#MidnightBlue|#white@eq@eq @invdef#DarkOrchid@mw@affs@diffhealth@diffmana\",\n  promptline2 = false,\n  blackoutprompt = \"@warning#red@paused@softpaused#DodgerBlue@retardation<black:grey>BLACKOUT-\",\n  monktransmuteto = 80,\n  aeonsipmana = 40,\n  parrystrategy = \"manual\",\n  useclot = true,\n  defprio = {\n    basic = {\n    },\n  },\n  precache = {\n    basic = {\n    },\n  },\n  magirobes = false,\n  haveparry = false,\n  mount = \"mule\",\n  stopinsomnia = false,\n  focusshifts = {\n    basic = {\n    },\n  },\n  havebreathing = false,\n  siphealth = 80,\n  gagdefshift = true,\n  \n  defup = {\n    basic = {\n    },\n  },\n  autoshrugat = 3,\n  sipmana = 80,\n  mosshealth = 80,\n  mossmana = 80,\n  usetransmutation = true,\n  monktransmute = false,\n  havedeathsight = false,\n  userage = false,\n  gstuff = true,\n  aeonsiphealth = 40,\n  treebaltime = 15,\n  haveinsomnia = false,\n  manaPercent = 10,\n  aeonblock = true,\n  haveclot = false,\n  dform = false,\n  usefocus = false,\n  unsoftpausehealth = 75,\n  keepup = {\n    basic = {\n    },\n  },\n  havefocus = false,\n  stopfocus = false,\n  stopclot = false,\n  profilenames = {\"basic\"},\n  profileondeath = \"basic\",\n  profileonburst = \"basic\",\n  autotree = false,\n  automount = false,\n  havevault = true,\n\tcuringsets = false\n}\n  if not no_save then\n    wsys.saveSettings()\n  end\nend\n\n--save table in external file\nfunction wsys.saveSettings(echo)\n  if string.char(getMudletHomeDir():byte()) == \"/\" then \n    _sep = \"/\" \n  else \n    _sep = \"\\\\\" \n  end -- if\n  local serverside_settings = getMudletHomeDir().._sep..\"wsys_settings.lua\"\n  table.save(serverside_settings, wsys.settings)\n  if echo then wsys.report(\"Setting saved\") end\nend\n\n--in here so the first install doesn't throw errors\n-- REPORT\nfunction wsys.report(message)\n cecho(\"\\n<LimeGreen>[<DodgerBlue>WunderSys<LimeGreen>]: <snow>\" .. message)\nend\n--\n\n--load table from external file\nfunction wsys.loadSettings()\n  if string.char(getMudletHomeDir():byte()) == \"/\" then \n    _sep = \"/\" \n  else \n    _sep = \"\\\\\" \n  end -- if\n  local serverside_settings = getMudletHomeDir().._sep..\"wsys_settings.lua\"\n  if (io.exists(serverside_settings)) then\n   table.load(serverside_settings, wsys.settings)\n   wsys.report(\"Loaded the settings\")\n  else\n   wsys.return_defaultsettings()\n   wsys.report(\"<red>No settings file found, loaded default settings.\")\n  end -- if\nend\n\nif wsys.settings then\n  wsys.saveSettings()\nend\nwsys.return_defaultsettings(true)\nwsys.loadSettings()",
    "eventHandlerList": null
}
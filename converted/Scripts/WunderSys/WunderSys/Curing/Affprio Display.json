{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Affprio Display",
    "packageName": null,
    "script": "local lprios = {}\nlocal lastcat = lastcat or false\n\nfunction wsys.affpriodisplay(cat)\n lprios = {\n   [\"wake\"] = {},\n   [\"stand\"] = {},\n   [\"herb\"] = {},\n   [\"salve\"] = {},\n   [\"smoke\"] = {},\n   [\"health\"] = {},\n   [\"focus\"] = {},\n   [\"writhe\"] = {},\n   [\"compose\"] = {},\n   [\"concentrate\"] = {},\n   [\"immunity\"] = {},\n  }\n\n  for k,v in pairs(wsys.settings.affprio[wsys.profile][wsys.myClass()]) do\n    lprios[wsys.tb.affctype[k]][k] = v\n  end\n  lastcat = cat or false\n  if cat == \"all\" or cat == nil then\n    for k,v in pairs(lprios) do\n      wsys.report(string.title(k) .. \" priorities:\")\n      for k,v in wsys.spairs(v, function(t,a,b) return t[b] > t[a] end) do\n        cecho(\"<white>\\n\"..k .. \": \" .. v)\n        local aliasone = \"wconfig affprio \" .. k .. \" \" .. tonumber(v) + 1\n        local commandone = [[expandAlias(\"]]..aliasone..[[\")]]\n        echo(\" \")\n        echoLink(\"(+)\", commandone, \"Move 'down' \" .. k, true)\n        echo(\" \")\n        local aliastwo = \"wconfig affprio \" .. k .. \" \" .. tonumber(v) - 1\n        local commandtwo = [[expandAlias(\"]]..aliastwo..[[\")]]\n        echoLink(\"(-)\", commandtwo, \"Move 'up' \" .. k, true)\n      end\n    end\n  elseif table.contains(lprios, cat) then\n    wsys.report(string.title(cat) .. \" priorities:\")\n    for k,v in wsys.spairs(lprios[cat], function(t,a,b) return t[b] > t[a] end) do\n      cecho(\"<white>\\n\"..k .. \": \" .. v)\n      local aliasone = \"wconfig affprio \" .. k .. \" \" .. tonumber(v) + 1\n      local commandone = [[expandAlias(\"]]..aliasone..[[\")]]\n      echo(\" \")\n      echoLink(\"(+)\", commandone, \"Move 'down' \" .. k, true)\n      echo(\" \")\n      local aliastwo = \"wconfig affprio \" .. k .. \" \" .. tonumber(v) - 1\n      local commandtwo = [[expandAlias(\"]]..aliastwo..[[\")]]\n      echoLink(\"(-)\", commandtwo, \"Move 'up' \" .. k, true)\n    end\n  else\n    wsys.report(\"Not a valid category. Please pick one of: ........\")\n  end\nend\n\n--don't worry about this one, its just choosing what to echo after a prio setting change\nfunction wsys.postchangeaffpriodisplay(aff)\n  if lastcat == \"all\" then\n    wsys.affpriodisplay(\"all\")\n  elseif lastcat == wsys.tb.affctype[aff] then\n    wsys.affpriodisplay(lastcat)\n  else\n    wsys.affpriodisplay(wsys.tb.affctype[aff])\n  end\nend\n\nfunction wsys.spairs(t, order)\n    -- collect the keys\n    local keys = {}\n    for k in pairs(t) do keys[#keys+1] = k end\n\n    -- if order function given, sort by it by passing the table and keys a, b,\n    -- otherwise just sort the keys \n    if order then\n        table.sort(keys, function(a,b) return order(t, a, b) end)\n    else\n        table.sort(keys)\n    end\n\n    -- return the iterator function\n    local i = 0\n    return function()\n        i = i + 1\n        if keys[i] then\n            return keys[i], t[keys[i]]\n        end\n    end\nend",
    "eventHandlerList": null
}
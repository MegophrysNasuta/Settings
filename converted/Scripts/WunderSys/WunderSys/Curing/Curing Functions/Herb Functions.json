{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Herb Functions",
    "packageName": null,
    "script": "wsys.lastherb = \"nothing\"\n\nfunction wsys.ate(herb)\n --ginger level handling\n --[[if (herb == \"ginger\" or herb == \"antimony\") and (wsys.lastherb == \"ginger\" or wsys.lastherb == \"antimony\") then\n  --check if ginger was eaten quick enough\n  if wsys.timeElapsed(wsys.times.bals.lost.herb) < 2300 then\n   cecho(\" <deep_pink>GINGER LEVEL +1!\")\n   wsys.gingerlevel = math.min(wsys.gingerlevel + 1, 10)\n  else\n   cecho(\" <deep_pink>GINGER LEVEL RESET!\")\n   wsys.gingerlevel = 1\n  end\n else]]\n  --TODO: Per announce 4313, ginger additional curing is blocked by the alchemist being in the room\n  --      For now, just assume it always only cures one level.\n  wsys.gingerlevel = 1\n --end\n wsys.lastherb = herb\n wsys.atesub(herb) \n wsys.cure = herb\n wsys.eating = false\n if not wsys.aff.homunculusmercury then\n  wsys.lostBal(\"herb\", 1.9)\n else\n  wsys.lostBal(\"herb\", 2.9)\n end\nend -- func\n\nfunction wsys.emptyherb()\n if wsys.cure == \"cohosh\" or wsys.cure == \"gypsum\" then\n  wsys.def.insomnia = true\n elseif wsys.cure ~= \"hawthorn\" and wsys.cure ~= \"calamine\" then\n  for k,v in pairs(wsys.tb.cures[wsys.cure]) do\n    wsys.predicted[v] = nil\n\t\n    if wsysf.affs[v] then\n      wsysf.core.debug.print(2, \"Empty herb eat should clear \".. v..\"?\")\n    end\n   disableTrigger(string.title(v) .. \" -\")\n  end -- for\n end -- if\n wsys.pairscheck(wsys.cure)\n wsys.cure = nil\nend -- if\n\n\nfunction wsys.herbbal()\n if not wsys.bals.herb and not wsys.lifevision then\n  wsys.gotBal(\"herb\")\n  wsys.herbbalsub()\n end -- if\nend -- func\n\n\nfunction wsys.herbballoss()\n if wsys.aff.blackout then\n  wsys.ate(wsys.eating)\n  do return end\n end -- if\nend -- func\n",
    "eventHandlerList": null
}
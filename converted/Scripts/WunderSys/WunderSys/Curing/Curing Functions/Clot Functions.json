{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Clot Functions",
    "packageName": null,
    "script": "wsys.bleeding = 0\nwsys.bleedtype = \"health\"\n\nfunction wsys.clot()\n if wsys.timer.clotwait then\n  killTimer(tostring(wsys.timer.clotwait))\n end\n wsys.timer.clotwait = tempTimer(wsys.myPing() * 2, [[wsys.timer.clotwait = nil;wsys.addqueue(\"clot\")]])\n wsys.salviaSend(\"clot\", false)\nend -- func\n\nfunction wsys.clotd()\n  if wsys.bleeding <= 30 then\n    wsys.bleeding = 0\n  else\n    wsys.bleeding = wsys.bleeding - 30\n  end\n  \n  wsys.clotqueue()\nend -- func\n\nfunction wsys.clotcure()\n  wsys.timer.bleedingTimer = nil\n  wsys.cure = \"clot\"\n  wsys.bleeding = 0\n  if wsys.timer.bleedingTimer then\n   killTimer(wsys.timer.bleedingTimer)\n   wsys.timer.bleedingTimer = nil\n  end\nend -- func\n\nfunction wsys.bleedingfor(amount, type)\n  --[=[wsys.affadd(\"bleeding\")\n  wsys.bleeding = tonumber(amount)\n  wsys.bleedtype = tostring(type)\n  if wsys.timer.bleedingTimer then\n   killTimer(wsys.timer.bleedingTimer)\n  end\n  wsys.timer.bleedingTimer = tempTimer(15, [[wsys.timer.bleedingTimer = nil;wsys.clotcure()]])]=]\nend --func\n\n--clots as much as you will allow according to your mana threshold.\nfunction wsys.maxclot()\n\n  local manaleft = wsys.stats.m - wsys.manathreshold()\n  local clotnum = 0\n  local aliasstring = \"\"\n\n  if wsys.settings.magirobes then\n    clotnum = math.floor((manaleft-100)/40)\n  else\n    clotnum = math.floor((manaleft-100)/60)\n  end\n\n  if clotnum > 0 then\n    aliasstring = \"clot\"\n    clotnum = clotnum - 1\n  end\n\n  while clotnum > 0 do\n    aliasstring = aliasstring .. \"/clot\"\n    clotnum = clotnum - 1\n  end\n\n  send(\"setalias maxclot \" .. aliasstring)\n  send(\"maxclot\")\n\nend",
    "eventHandlerList": null
}
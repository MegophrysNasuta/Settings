{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "HM Functions",
    "packageName": null,
    "script": "wsys.hmprio = \"h\"\n\nfunction wsys.hmbal()\n  wsys.hmbalsub()\n  wsys.gotBal(\"hm\")\nend -- if\n\nfunction wsys.sipped(elix)\n  if wsys.sipping == \"health\" or wsys.sipping == \"mana\" then\n    wsys.lostBal(\"hm\", 6)\n    if wsys.cancure() and wsys.settings.usemoss then wsys.mossThreshholdUp() end\n  elseif wsys.sipping == \"immunity\" then\n    wsys.cure = wsys.sipping\n  end\nend\n\nfunction wsys.mossed()\n  wsys.lostBal(\"moss\", 6.5)\nend\n\nfunction wsys.mossbal()\n  wsys.gotBal(\"moss\")\nend\n\nfunction wsys.mossThreshholdDown()\n  local mh = wsys.settings.mosshealth - 10\n  local mm = wsys.settings.mossmana - 10\n  if mh < 0 then mh = 0 end\n  if mm < 0 then mm = 0 end\n  send(\"curing mosshealth \" .. mh, false)\n  send(\"curing mossmana \" .. mm,false)\nend\n\nfunction wsys.mossThreshholdUp()\n  send(\"curing mosshealth \"..wsys.settings.mosshealth, false)\n  send(\"curing mossmana \"..wsys.settings.mossmana, false)\nend\n\nfunction wsys.mossThreshholdDownFailsafe(event, bal)\n  if event == \"got bal\" and bal == \"hm\"  then\n    if wsys.cancure() and wsys.settings.usemoss then wsys.mossThreshholdDown() end\n  end\nend\n\nregisterAnonymousEventHandler(\"got bal\", \"wsys.mossThreshholdDownFailsafe\")\n\nfunction wsys.manaprio()\n wsys.hmprio = \"m\"\n send(\"curing priority mana\")\n wsys.report(\"Switched to <deep_sky_blue>MANA <red>priority\")\nend\n\nfunction wsys.healthprio()\n wsys.hmprio = \"h\"\n send(\"curing priority health\")\n wsys.report(\"Switched to <green>HEALTH <red>priority\")\nend\n\nfunction onSap()\n  if wsys.hmprio == \"h\" then\n    wsys.manaprio()\n    if sapManaSipTimer then killTimer(tostring(sapManaSipTimer)) end\n    sapManaSipTimer = tempTimer(5, [[sapManaSipTimer = nil;wsys.healthprio()]]) \n  end\nend\n\nfunction hmtoggle()\n  if wsys.hmprio == \"h\" then\n    wsys.manaprio()\n  else\n    wsys.healthprio()\n  end -- if\nend\n\nfunction wsys.moss()\n  if wsys.settings.usetransmutation then\n    wsys.osend(\"outr potash\")\n    wsys.osend(\"eat potash\")\n  else\n    wsys.osend(\"outr irid\")\n    wsys.osend(\"eat irid\")\n  end\nend\n\nfunction wsys.hmsip(hm)\n  if hm == \"health\" then\n    wsys.osend(\"sip health\")\n  elseif hm == \"mana\" then\n    wsys.osend(\"sip mana\")\n  else\n   wsys.report(\"Not a valid thing to sip, check your wsys.hmsip() implementation\")\n  end\nend\n\n\n\n",
    "eventHandlerList": null
}
{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Fullstats",
    "packageName": null,
    "script": "wsys.fullstats = wsys.fullstats or false\nwsys.fullstatsaction = wsys.fullstatsaction or false\n\nfunction wsys.set_fullstatsaction(ac)\n  wsys.fullstatsaction = ac\nend\n\nfunction wsys.clear_fullstatsaction()\n  wsys.fullstatsaction = false\nend\n\nfunction wsys.fullstatsf(ac)\n  if ac then\n    wsys.set_fullstatsaction(ac)\n  end\n  wsys.fullstats = true\n  send(\"curing siphealth 99\", false)\n  send(\"curing sipmana 99\", false)\nend\n\nfunction wsys.fullstatsHandler()\n  if wsys.fullstats then\n    local healthp = wsys.stats.h/wsys.stats.maxh * 100\n    local manap = wsys.stats.m/wsys.stats.maxm * 100\n    if healthp >= 99 and manap >= 99 then\n      wsys.fullstats = false\n      send(\"curing siphealth \" .. wsys.settings.siphealth, false)\n      send(\"curing sipmana \" .. wsys.settings.sipmana, false)\n      if wsys.fullstatsaction then\n        wsys.osend(wsys.fullstatsaction)\n        wsys.clear_fullstatsaction()\n      end\n    end\n  end\nend\n\nregisterAnonymousEventHandler(\"gmcp.Char.Vitals\", \"wsys.fullstatsHandler\")\nregisterAnonymousEventHandler(\"gmcp.Char.Vitals\", \"wsys.fullstatsHandler\")",
    "eventHandlerList": null
}
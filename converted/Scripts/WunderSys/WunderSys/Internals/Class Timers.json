{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Class Timers",
    "packageName": null,
    "script": "-- classtimers table\nwsys.classtimers = wsys.classtimers or {}\n\n--event handling thingy\nfunction wsys.classTimers(event, affliction, class)\n  if event == \"got aff\" then\n    if class ~= nil then\n      wsys.newClassTimer(class)\n    end\n  end\nend --func\n\n--start a class timer\nfunction wsys.newClassTimer( class )\n  if table.contains(wsys.classtimers, class) then\n    wsys.killClassTimer(class, true)\n  else\n    raiseEvent(\"class timer started\", class)\n  end\n  wsys.classtimers[class] = tempTimer(45, function() wsys.killClassTimer(class) end)\nend\n\n--kill a class timer\nfunction wsys.killClassTimer( class, no_event )\n  if wsys.classtimers[class] then killTimer(wsys.classtimers[class]) end\n  if table.contains(wsys.classtimers, wsys.classtimers[class]) then\n    wsys.classtimers[class] = nil\n    if not no_event then raiseEvent(\"class timer ended\", class) end\n  end\nend\n\nfunction wsys.classTimerExists(class)\n  if table.contains(wsys.classtimers, wsys.classtimers[class]) then return true else return false end\nend\n\n--registerAnonymousEventHandler(\"got aff\", \"wsys.classTimers\")\n",
    "eventHandlerList": null
}
{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Check for Abilities",
    "packageName": null,
    "script": "function wsys.abilityCheck()\n  wsys.abilitycheck = true\n  sendGMCP([[Char.Skills.Get { \"group\": \"survival\", \"name\": \"focusing\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"survival\", \"name\": \"efficiency\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"survival\", \"name\": \"insomnia\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"survival\", \"name\": \"breathing\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"chivalry\", \"name\": \"rage\" }]])\n\n  sendGMCP([[Char.Skills.Get { \"group\": \"vision\", \"name\": \"deathsight\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"necromancy\", \"name\": \"deathsight\" }]])\n\n  sendGMCP([[Char.Skills.Get { \"group\": \"survival\", \"name\": \"clotting\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"chivalry\", \"name\": \"clotting\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"kaido\", \"name\": \"clotting\" }]])\n\n  sendGMCP([[Char.Skills.Get { \"group\": \"venom\", \"name\": \"shrugging\" }]])\n\n  sendGMCP([[Char.Skills.Get { \"group\": \"weaponry\", \"name\": \"parrying\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"tekura\", \"name\": \"guarding\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"swashbuckling\", \"name\": \"trueparry\" }]])\n\n  sendGMCP([[Char.Skills.Get { \"group\": \"elementalism\", \"name\": \"simultaneity\" }]])\n  sendGMCP([[Char.Skills.Get { \"group\": \"healing\", \"name\": \"simultaneity\" }]])\n  \n  sendGMCP([[Char.Skills.Get { \"group\": \"devotion\", \"name\": \"bliss\" }]])\nend\n\n\nfunction wsys.abilityCheckAnalyse()\n  if gmcp.Char.Skills.Info.skill == \"clotting\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.haveclot = true\n      --wsys.report(\"You have the clotting ability\")\n    end\n  \n\n  elseif gmcp.Char.Skills.Info.skill == \"focusing\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.havefocus = true\n      --wsys.report(\"You have the focussing ability\")\n    end\n\n  elseif gmcp.Char.Skills.Info.skill == \"breathing\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.havebreathing = true\n      --wsys.report(\"You have the focussing ability\")\n    end\n  \n\n  elseif gmcp.Char.Skills.Info.skill == \"insomnia\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.haveinsomnia = true\n      --wsys.report(\"You have the insomnia ability\")\n    end\n  \n\n  elseif gmcp.Char.Skills.Info.skill == \"rage\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.haverage = true\n      --wsys.report(\"You have the rage ability\")\n    end\n  \n\n  elseif gmcp.Char.Skills.Info.skill == \"efficiency\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.treebaltime = 20 -- Actually 15 usually, but this is just a failsafe anyway\n    else\n      wsys.settings.treebaltime = 30\n    end\n\n  elseif gmcp.Char.Skills.Info.skill == \"shrugging\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.haveshrugging = true\n      --wsys.report(\"You have the shrugging ability\")\n    end\n\n  elseif gmcp.Char.Skills.Info.skill == \"parrying\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.haveparry = true\n      --wsys.report(\"You have the parrying ability\")\n    end\n  elseif gmcp.Char.Skills.Info.skill == \"guarding\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.haveparry = true\n      --wsys.report(\"You have the guarding ability\")\n    end\n  elseif gmcp.Char.Skills.Info.skill == \"trueparry\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.haveparry = true\n      --wsys.report(\"You have the trueparrying ability\")\n    end\n\n  elseif gmcp.Char.Skills.Info.skill == \"simultaneity\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.havesimultaneity = true\n      --wsys.report(\"You have the simultaneity ability\")\n    end\n\n  elseif gmcp.Char.Skills.Info.skill == \"bliss\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.havebliss = true\n      --wsys.report(\"You have the simultaneity ability\")\n    end\n\n  elseif gmcp.Char.Skills.Info.skill == \"deathsight\" then\n    if not string.findPattern(gmcp.Char.Skills.Info.info, \"You have not yet learned this ability\") and gmcp.Char.Skills.Info.info ~= \"\" then\n      wsys.settings.havedeathsight = true\n    end\n\n  end\n  if wsys.abilitycheck and not wsys.curingstatuscheck then\n    wsys.curingstatuscheck = true\n    wsys.abilitycheck = false\n    enableTrigger(\"Curing Status Check\")\n    send(\"curing status\", false)\n  end\n  \nend\n\nregisterAnonymousEventHandler(\"gmcp.Char.Skills.Info\", \"wsys.abilityCheckAnalyse\")",
    "eventHandlerList": null
}
{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Lusternia",
    "packageName": null,
    "script": "registerAnonymousEventHandler(\"mmp link externals\", \"mmp.addWingsLusternia\")\n\nfunction mmp.addWingsLusternia()\n  if mmp.game ~= \"lusternia\" then\n    return\n  end\n  --items that use standard bix rules\n  if mmp.usebix() then\n    --cubix and things\n    if mmp.settings.medallion then\n      mmp.tempSpecialExit(13367, \"touch medallion\")\n    end\n    if mmp.settings.cubix then\n      mmp.tempSpecialExit(6184, \"touch cubix\")\n    end\n    if mmp.settings.torus and mmp.usebix() then\n      mmp.tempSpecialExit(28548, \"touch torus\")\n    end\n    --epic quest items\n    if mmp.settings.fingerblade then\n      mmp.tempSpecialExit(18777, \"touch fingerblade\")\n    end\n    if mmp.settings.blossom then\n      mmp.tempSpecialExit(18730, \"touch blossom\")\n    end\n    if mmp.settings.mandala then\n      mmp.tempSpecialExit(19563, \"touch mandala\")\n    end\n    if mmp.settings.belt then\n      mmp.tempSpecialExit(19627, \"touch enlightened\")\n    end\n    if mmp.settings.mantle then\n      mmp.tempSpecialExit(18762, \"touch starlight\")\n    end\n    if mmp.settings.key then\n      mmp.tempSpecialExit(18732, \"touch key\")\n    end\n  end\n  --things which use prism rules\n  if mmp.useprism() then\n    if mmp.settings.prism then\n      mmp.tempSpecialExit(6182, \"touch prism\")\n    end\n    --curio collections\n    if mmp.settings.bonecurio then\n      mmp.tempSpecialExit(28613, \"curio collection activate bone\")\n    end\n    if mmp.settings.flowercurio then\n      mmp.tempSpecialExit(28624, \"curio collection activate flower\")\n    end\n    if mmp.settings.utensilcurio then\n      mmp.tempSpecialExit(28617, \"curio collection activate utensil\")\n    end\n    if mmp.settings.fluttercurio then\n      mmp.tempSpecialExit(28622, \"curio collection activate flutter\")\n    end\n    if mmp.settings.toolcurio then\n      mmp.tempSpecialExit(28586, \"curio collection activate tool\")\n    end\n    if mmp.settings.facecurio then\n      mmp.tempSpecialExit(28433, \"curio collection activate face\")\n    end\n    if mmp.settings.toycurio then\n      mmp.tempSpecialExit(21548, \"curio collection activate toy\")\n    end\n    if mmp.settings.feathercurio then\n      mmp.tempSpecialExit(28591, \"curio collection activate feather\")\n    end\n    if mmp.settings.figurecurio then\n      mmp.tempSpecialExit(28312, \"curio collection activate figure\")\n    end\n    if mmp.settings.vernalcurio then\n      mmp.tempSpecialExit(29908, \"curio collection activate vernal\")\n    end\n    if mmp.settings.soullesscurio then\n      mmp.tempSpecialExit(29909, \"curio collection activate soulless\")\n    end\n  end\n  --all the bubblixes!\n  local bubblixes =\n    {\n      {\n        setting = \"figurine\",\n        item = \"icebix\",\n        room = 23187,\n        areas = {\"Northern Icewynd Mountains\", \"Southern Icewynd Mountains\"},\n      },\n      {setting = \"twist\", item = \"diobix\", room = 18203, areas = {\"Mount Dio\"}},\n      {setting = \"snowglobe\", item = \"treebix\", room = 10992, areas = {\"the Great Spirit Tree\"}},\n      {setting = \"periscope\", item = \"aquabix\", room = 36073, areas = {\"Aquagoria\"}},\n      {setting = \"pebble\", item = \"lyraabix\", room = 33825, areas = {\"Lyraa Ey Rielys\"}},\n      {setting = \"shard\", item = \"xionbix\", room = 12652, areas = {\"the Workshop of Xion\"}},\n      {setting = \"cookie\", item = \"crumbix\", room = 9888, areas = {\"Crumkindivia\"}},\n      {setting = \"wheel\", item = \"drambix\", room = 10509, areas = {\"the Dramube Triangle\"}},\n      {setting = \"head\", item = \"bottlebix\", room = 11811, areas = {\"the Bubble of Bottledowns\"}},\n      {setting = \"icicle\", item = \"frostbix\", room = 10457, areas = {\"Frosticia\"}},\n      {setting = \"screwdriver\", item = \"facbix\", room = 10185, areas = {\"the Facility\"}},\n      {setting = \"mud\", item = \"mucklebix\", room = 9985, areas = {\"Mucklemarsh\"}},\n      {\n        setting = \"tibia\",\n        item = \"cankerbix\",\n        room = 11600,\n        areas = {\"the Cankermore Battlegrounds\"},\n      },\n    }\n  local shortcutCreated = false\n  for _, bubblix in pairs(bubblixes) do\n    if mmp.settings[bubblix.setting] then\n      local command = \"touch \" .. bubblix.item\n      if not shortcutCreated then\n        --for the first bubblix in the list, let it be used as a shortcut to aetherplex.\n        mmp.tempSpecialExit(bubblix.room, 6831, command)\n        shortcutCreated = true\n      end\n      --for every bix, create an exit from outside aetherplex to the bubble.\n      mmp.tempSpecialExit(148, bubblix.room, command)\n      if mmp.usebubblix() then\n        if table.contains(bubblix.areas, gmcp.Room.Info.area) then\n          mmp.tempSpecialExit(mmp.currentroom, 6831, command)\n        elseif not table.contains(gmcp.Room.Info.details, \"an Aetherbubble\") then\n          mmp.tempSpecialExit(mmp.currentroom, bubblix.room, command)\n        end\n      end\n    end\n  end\n  --one use button travel!\n  if mmp.settings.buttons then\n    local colors =\n      {\n        blue = 36073,\n        brown = 11811,\n        black = 11600,\n        yellow = 9888,\n        red = 10509,\n        steel = 10185,\n        white = 10457,\n        purple = 47812,\n        green = 9985,\n        crystal = 12652,\n        wooden = 10992,\n      }\n    local exitScript = [[script:sendAll(\"outr %sbutton\", \"touch %sbutton\", false)]]\n    if\n      table.contains(gmcp.Room.Info.details, \"the Prime Material Plane\") and\n      table.contains(gmcp.Room.Info.details, \"outdoors\")\n    then\n      for color, room in pairs(colors) do\n        mmp.tempSpecialExit(mmp.currentroom, room, exitScript:format(color, color), 20)\n      end\n    else\n      for color, room in pairs(colors) do\n        mmp.tempSpecialExit(148, room, exitScript:format(color, color), 20)\n      end\n    end\n  end\n  --basin of life specific travel devices\n  if mmp.settings.compass then\n    local startingRoom = mmp.lusterniaInBasin() and mmp.currentroom or 148\n    local compassPoints =\n      {\n        north = 21695,\n        northeast = 10742,\n        northwest = 6546,\n        east = 9789,\n        southeast = 14998,\n        south = 10670,\n        southwest = 19613,\n        west = 20037,\n      }\n    for direction, destinationRoom in pairs(compassPoints) do\n      mmp.tempSpecialExit(startingRoom, destinationRoom, \"Touch compass \" .. direction, 40)\n    end\n  end\n  mmp.clearpathcache()\nend",
    "eventHandlerList": null
}
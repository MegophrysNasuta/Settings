{
    "attribs": {
        "isActive": "no",
        "isFolder": "no"
    },
    "type": "script",
    "name": "mmp_grabenvid",
    "packageName": null,
    "script": "function mmp_grabenvid()\n  if not mmp.envids[gmcp.Room.Info.environment] then\n    mmp.envids[gmcp.Room.Info.environment] = getRoomEnv(mmp.currentroom)\n    mmp.echo(string.format(\"Remembered environment %s as %d\", gmcp.Room.Info.environment, mmp.envids[gmcp.Room.Info.environment]))\n  end\nend\n\nfunction mmp.getMaxID()\n  local roomIDs = {}\n  for area, _ in pairs(mmp.areatabler) do\n    local ok, t = pcall(getAreaRooms, area)\n    if ok then\n      for _, id in pairs(t or {}) do\n        roomIDs[id] = true\n      end\n    end\n  end\n\n  return table.maxn(roomIDs)\nend\n\nfunction mmp.getUnknownEnvs()\n  local maxid, missing = mmp.getMaxID(), {}\n\n  for i = 1, maxid do\n    if mmp.roomexists(i) then\n      if not table.contains(mmp.envids, getRoomEnv(i)) and not table.contains(missing, getRoomEnv(i)) then\n        mmp.echo(string.format(\"Missing env %d from room %d ('%s' in '%s')\",\n          tostring(getRoomEnv(i)), i, tostring(getRoomName(i)), tostring(mmp.areatabler[getRoomArea(i)])))\n        missing[i] = getRoomEnv(i)\n      end\n    end\n  end\nend",
    "eventHandlerList": "\n\t\t\t\t\t\t\t"
}
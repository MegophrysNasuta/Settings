{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "script",
    "name": "Limb Relays",
    "packageName": null,
    "script": "--limb relays\nfunction ak.limbs.damageEcho_Target(who,limb)       -----Reset Timer --ak.limbs.tekura.dontbreaksethead\n  local hitsneeded = roundUp((100-ak.limbs.limbcount[who][limb])/(ak.limbs.limbcount[who][limb] - ak.limbs.limbcount[who][\"lastpercent\"..limb]),0)\n--Limbs\n  if (ak.limbs.limbcount[who][limb] >= 100) and limb ~= \"torso\" and limb ~= \"head\" then\n\t\t ak.limbs.limbcount[who].maxbreaks[limb] = ak.limbs.limbcount[who][limb]\n     ak.limbs.limbcount[who][limb] = 0\n     affstrack.score[limb] = 200\n\t\t ak.limbs.lastbroke = limb\n     cecho(\"<green>\\n\\nBroke \"..who..\"'s \"..limb..\"(A)!!\")\n\t\t ak.limbs.breakOrder(limb)\n--Head\n  elseif (ak.limbs.limbcount[who][limb] >= 100) and not ak.limbs.tekura.dontbreaksethead then\n\t\t ak.limbs.limbcount[who].maxbreaks[limb] = ak.limbs.limbcount[who][limb]\n     ak.limbs.limbcount[who][limb] = 0\n     affstrack.score[limb] = affstrack.score[limb] + 100\n     if limb == \"head\" then affstrack.score.stupidity = 100 end\n\t\t ak.limbs.lastbroke = limb\n     cecho(\"<green>\\n\\nBroke \"..who..\"'s \"..limb..\"(B)!!\")\n\t\t ak.limbs.breakOrder(limb)\n  elseif ak.limbs.tekura.dontbreaksethead then\n     if ak.limbs.limbcount[who][\"head\"] > 100 then\n        affstrack.score[\"head\"] = 200\n        affstrack.score.stupidity = 100\n     else\n        ak.limbs.limbcount[who][\"head\"] = ak.limbs.limbcount[who][\"lastpercenthead\"]\n        affstrack.score[\"head\"] = affstrack.score[\"head\"] + 100\n        affstrack.score.stupidity = 100\n     end\n\t\t ak.limbs.lastbroke = limb\n     cecho(\"<green>\\n\\nBroke \"..who..\"'s \"..limb..\"(AXK)!!\")\n\t\t ak.limbs.breakOrder(limb)\n  end\n  if affstrack.score.head > 200 then affstrack.score.head = 200 end\n  cecho(\"<yellow>\\n\"..who..\"'s \"..limb..\" is at<cyan> \"..roundUp(ak.limbs.limbcount[who][limb],0)..\"(\"..hitsneeded..\")!!\")\n  if ak.limbs.ScoreRun then \n\t\tak.scoreup(target)\n\t\t--cecho(\"<green>Score!\")\n  end\n  limbtimer = limbtimer or {}\n  limbtimer[who] = limbtimer[who] or {}\n  if limbtimer[who][limb] then killTimer(limbtimer[who][limb]) end\n  if who == \"Me\" and limb == \"torso\" then\n     limbtimer[who][limb] = tempTimer(180, [[ \n         ak.limbs.ignoretorso = false\n         cecho(\"<yellow>\\n\\nReset ]]..who..[['s ]]..limb..[[!\\n\")\n         ak.limbs.limbcount.]]..who..[[.]]..limb..[[ = 0\n         ak.scoreup(target)\n     ]])\n  else\n     limbtimer[who][limb] = tempTimer(180, [[ \n         cecho(\"<yellow>\\n\\nReset ]]..who..[['s ]]..limb..[[!\\n\")\n         ak.limbs.limbcount.]]..who..[[.]]..limb..[[ = 0\n         ak.scoreup(target)\n     ]])\n  end\nend\n\nfunction ak.limbs.damageEcho_Non_Target(who,limb) \n  donotrebreak = donotrebreak or {}\n  donotrebreak[who] = donotrebreak[who] or {}\n  limbtimer = limbtimer or {}\n  limbtimer[who] = limbtimer[who] or {}\n  local hitsneeded = roundUp((100-ak.limbs.limbcount[who][limb]) / (ak.limbs.limbcount[who][limb] - ak.limbs.limbcount[who][\"lastpercent\"..limb]),0)\n  --local hitsneeded = roundUp(100 / (ak.limbs.limbcount[who][limb] - ak.limbs.limbcount[who][\"lastpercent\"..limb]),0)\n--Limbs\n  if ak.limbs.limbcount[who][limb] >= 100 and limb ~= \"torso\" and limb ~= \"head\" then\n     ak.limbs.limbcount[who][limb] = 0\n     if who == \"Me\" or who == \"You\" then \n        cecho(\"<green>\\n\\nBroke my \"..limb..\"!!\")\t\t\t\n\t\telse\n        cecho(\"<green>\\n\\nBroke \"..who..\"'s \"..limb..\"!!\")\n     end\n     ak.limbs.damagedisable(who,limb)\n--Head\n  elseif ak.limbs.limbcount[who][limb] >= 100 then\n     ak.limbs.limbcount[who][limb] = 0\n     if who == \"Me\" or who == \"You\" then \n        cecho(\"<green>\\n\\nBroke my \"..limb..\"!!\")\t\t\t\n\t\telse\n        cecho(\"<green>\\n\\nBroke \"..who..\"'s \"..limb..\"!!\")\n     end\n     if (who == \"Me\" or who == \"You\") and limb == \"torso\" and not ak.limbs.ignoretorso then\n        wsys.affadd(\"mildtrauma\")\n\t\t\t\tsend(\"curing predict mildtrauma\")\n     end\n     ak.limbs.damagedisable(who,limb)\n  end\n  if who == \"Me\" then\n     if GUI and GUI.UpdateLimbs then GUI.UpdateLimbs() end\n     cecho(\"<yellow>\\nMy <cyan>\"..limb..\" is at<cyan> \"..roundUp(ak.limbs.limbcount[who][limb],0)..\"(\"..hitsneeded..\")!!\")\n     if ak.limbs.ScoreRun then ak.scoreup(target) end\n     if limbtimer[who][limb] then \n\t\t\tkillTimer(limbtimer[who][limb]) \n\t\tend\n     limbtimer[who][limb] = tempTimer(180, [[ \n         cecho(\"<yellow>\\n\\nReset My ]]..limb..[[!\\n\")\n         ak.limbs.limbcount.]]..who..[[.]]..limb..[[ = 0\n         if GUI and GUI.UpdateLimbs then GUI.UpdateLimbs() end\n         ak.scoreup(target)\n     ]])\n  else\n     if limbtimer[who][limb] then \n\t\t\tkillTimer(limbtimer[who][limb]) \n\t\tend\n     limbtimer[who][limb] = tempTimer(180, [[ \n         cecho(\"<yellow>\\n\\nReset ]]..who..[['s ]]..limb..[[!\\n\")\n         ak.limbs.limbcount.]]..who..[[.]]..limb..[[ = 0\n         if ]]..who..[[ == target then ak.scoreup(target)end\n     ]])\n  end\nend\n\nfunction ak.limbs.damagedisable(who,limb)\n   if limb == \"aflame\" or who == \"Me\" then\n      return\n   elseif _G[who..\"\"..limb..\"disablelimbdamage\"] == nil then \n      _G[who..\"\"..limb..\"disablelimbdamage\"] = tempTimer(4,[[\n         _G[\"]]..who..[[]]..limb..[[disablelimbdamage\"] = nil\n         cecho(\"<cyan>\\n\\n\\nCounting again for, <yellow>]]..who..[['s ]]..limb..[[!\\n\\n\\n\")\n         ak.limbs.countAgain(\"]]..who..[[\",\"]]..limb..[[\")\n         cecho(\"<cyan>\\n\\n\\nCounting again for, <yellow>]]..who..[['s ]]..limb..[[!\\n\\n\\n\")\n      ]])\n   end\nend\n\nfunction ak.limbs.countAgain(who,limb) --Return From Timeout on Secondary Targets\n   local remove = limb:gsub(\"%s+\", \"\")\n   remove = remove:lower()\nend\n\nfunction ak.limbs.CountAgain(limb) --Return from Apply Script\n   ak.limbs.limb_table_check(target)\n   if ak.limbs.limbcount[target] and ak.limbs.limbcount[target][limb] then \n      ak.limbs.limbcount[target][limb] = 0 \n   end\nend\n",
    "eventHandlerList": null
}
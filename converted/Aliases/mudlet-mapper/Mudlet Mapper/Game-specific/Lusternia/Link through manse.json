{
    "attribs": {
        "isActive": "yes",
        "isFolder": "no"
    },
    "type": "alias",
    "name": "Link through manse",
    "script": "local portalRooms = {\ngaudiguch=\"19861\",\nglomdoring=\"7747\",\ncelest=\"6834\",\nserenwilde=\"6833\",\nhallifax=\"19937\",\nmagnagora=\"6832\",\naetherplex=\"6831\",\n}\n\nif mmp.game ~= \"lusternia\" then return end\nmatches[2]=matches[2]:lower()\nmatches[3]=matches[3]:lower()\nlocal manse, city\nif portalRooms[matches[2]] then\n\tcity=matches[2]\n\tmanse=matches[3]\nelseif portalRooms[matches[3]] then\n\tcity=matches[3]\n\tmanse=matches[2]\nelse\n\tmmp.echo(\"Invalid city\")\n\treturn\nend\nif not gmcp.Room.Info.area:find(\"(manse)\") then\n\tmmp.echo(\"You are not in a manse\")\nelse\n\tif\tsearchRoom(gmcp.Room.Info.num):sub(0,11)==\"searchRoom:\" then\n\t\taddRoom(gmcp.Room.Info.num)\n\tend\n\tif getRoomArea(gmcp.Room.Info.num)==-1 then\n\t\tsetRoomArea(gmcp.Room.Info.num,addAreaName(manse:title()..\" Manse\"))\n\tend\n\tsetRoomChar(gmcp.Room.Info.num,\"A\")\n\taddSpecialExit(portalRooms[city],gmcp.Room.Info.num,\"Portal enter \"..manse)\n\taddSpecialExit(portalRooms[\"aetherplex\"],gmcp.Room.Info.num,\"Portal enter \"..manse)\n\taddSpecialExit(gmcp.Room.Info.num,portalRooms[\"aetherplex\"],\"portal exit aetherplex\")\n\taddSpecialExit(gmcp.Room.Info.num,portalRooms[city],\"portal exit \"..city)\n\tmmp.echo(city:title()..\" has been linked to the Aetherplex through \"..manse:title())\nend",
    "command": null,
    "packageName": null,
    "regex": "(?i)^manselink (\\w+) (\\w+)$"
}